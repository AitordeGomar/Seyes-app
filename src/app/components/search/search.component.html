<div id= 'search' class="component">
  <button (click)="clDash()">Go back to dashboard</button>
  <h1>List of users</h1>
  <table>
    <tr>
      <td>No</td>
      <td>Username</td>
      <td title="paired likes divided by user total likes">% compatibilty</td>
      <td>Isn't he/she your friend yet?</td>
      <td>Match</td>
    </tr>
    <tr *ngFor="let u of userList; let i = index">
      <td *ngIf="username !== '**'">{{ i + 1 }}</td>
      <td *ngIf="username !== '**'">
        <div (click)=goProfile($event)>{{ u.username }}</div>
        <div *ngIf='btnVisitProfile && visitedUser == u.username '><app-visitprofile [username]='username' [visitedUser]='visitedUser'></app-visitprofile></div>
      </td>
      <td
          *ngIf="u.username !== username && username !== '**'"
        >
          {{
            (userList[idUser].likes.concat(u.likes).length -
              duplicate(u.likes)) /
              userList[idUser].likes.length | percent
          }}
        </td>
      <td
          *ngIf="
            u.username !== username && username !== '**' &&
            !userList[idUser].friends.includes(u.username)
          "
        >
          <button (click)="clAddFriend($event)">Add friend</button>
        </td>
        <td
          *ngIf="u.username !== username && username !== '**' && 
          JSON.stringify(userList[idUser].likes.sort()) === JSON.stringify(u.likes.sort())"
          style='background-color: yellow;border:5px solid black;'
        >
          Match
        </td>
    </tr>
  </table>
  <h1>List of topics</h1>
  <table>
    <tr>
      <td>No</td>
      <td>Topics</td>
      <td>Don't you like it yet?</td>
    </tr>
    <tr *ngFor="let q of questionsList; let i = index">
      <td *ngIf="username !== '**'">{{ i + 1 }}</td>
      <td *ngIf="username !== '**'">{{ q.question }}</td>
      <td>
        <div *ngIf="!userList[idUser].likes.includes(q.question)">
          <button (click)="clAddTopic($event)">Add Topic</button>
        </div>
      </td>
    </tr>
  </table>

  
</div>
